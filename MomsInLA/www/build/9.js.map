{"version":3,"sources":["../../src/pages/activitylist/activitylist.module.ts","../../src/pages/activitylist/activitylist.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule} from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ActivitylistPage } from './activitylist';\n\n@NgModule({\n  declarations: [\n    ActivitylistPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ActivitylistPage),\n  ],\n  entryComponents: [\n    ActivitylistPage,\n  ]\n})\nexport class ActivitylistPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/activitylist/activitylist.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, PopoverController} from 'ionic-angular';\nimport { FirebaseServiceProvider } from '../../providers/firebase-service/firebase-service';\nimport { map } from 'rxjs/operators';\nimport { NativeGeocoder, NativeGeocoderOptions, NativeGeocoderReverseResult } from '@ionic-native/native-geocoder';\nimport { ActivityFilterComponent } from '../../components/activity-filter/activity-filter';\nimport { Geolocation } from '@ionic-native/geolocation';\n\n@IonicPage()\n\n@Component({\n  selector: 'page-activitylist',\n  templateUrl: 'activitylist.html',\n})\nexport class ActivitylistPage {\n  \n  //\n  activityCards = [new ActivitylistCard(1), \n                  new ActivitylistCard(2),\n                  new ActivitylistCard(3)];\n\n\n  filters: Array<string>;\n  disp$: any = [];\n  cityLocation: string;\n\t// @ViewChild('sectionSelect') sectionSelect: Select;\n  // @ViewChild('sectionSelect2') sectionSelect2: Select;\n  // @ViewChild('sectionSelect3') sectionSelect3: Select;\n  // locate() {\n  //    this.sectionSelect.open();\n  // }\n\n  // filter() {\n  //    this.sectionSelect3.open();\n  // }\n\n\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams, \n    public fsp: FirebaseServiceProvider,\n    private geocoder: NativeGeocoder,\n    private popoverCtrl: PopoverController,\n    public geolocation: Geolocation) {\n\n    this.filters = ['<1km'];\n    this.cityLocation = '(定位中)';\n  }\n  compareFn(option1: any, option2: any) {\n      return option1.value === option2.value;\n      \n  }\n\n  monthChange(val: any) {\n    console.log('Month Change:', val);\n  }\n\n  dayChange(val: any) {\n    console.log('Day Change:', val);\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ActivitylistPage');\n    this.loadData();\n    let options: NativeGeocoderOptions = {\n      useLocale: true,\n      maxResults: 5\n  };\n  this.geolocation.getCurrentPosition().then((resp)=>{\n    console.log(resp);\n    this.geocoder.reverseGeocode(resp.coords.latitude, resp.coords.longitude, options)\n    .then((result: NativeGeocoderReverseResult[]) => {\n      console.log(JSON.stringify(result[0]));\n      this.cityLocation = result[0].locality;\n    })\n    .catch((error: any) => console.log(error));\n  }).catch(err=>{\n    console.log(err)\n  });\n\n  }\n\n  loadData(){\n    this.fsp.getDailyEvent().snapshotChanges().pipe(\n      map(changes=>{\n        return changes.map(c=>({\n          key: c.payload.key, ...c.payload.val()\n        }))\n      })\n    ).subscribe(data=>{\n      console.log(data);\n      for(let i=0; i< data.length;i++){\n        this.disp$.push(data[i]);\n      }\n    });\n  }\n\n  openDetail(key){\n    console.log(key);\n    this.navCtrl.push('ActivityPage',{infoId:key});\n  }\n\n  presentPopover(event) {\n    const popover = this.popoverCtrl.create(ActivityFilterComponent);\n    popover.present({\n      ev: event\n    });\n    popover.onDidDismiss(data=>{\n      switch(data.idx){\n        case 0:\n          this.disp$.sort(function(a,b){\n            return b.createDate - a.createDate\n          });\n          return;\n        case 1:\n          this.disp$.sort(function(a,b){\n            return b.numsLike - a.numsLike\n          });\n      }\n    });\n  }\n  \n\n}\n\n\nexport class ActivitylistCard{\n\n  title: string;\n  time: string;\n  location: string;\n  featrues: Array<string>\n  likes: number;\n  ThumbnailImg:string;\n  isOfficial:boolean;\n  \n  constructor(public id: number){\n    this.title = 'Kids Club at the Grove: blah blah';\n    this.time = '2018-01-01T18:00:00';//@todo reformat\n    this.location = '189 The Grove DR. CA91719';//@todo reformat\n    this.featrues = ['shoufei 10 dao','huwaiyouwan'];\n    this.likes = 15;\n    this.ThumbnailImg = 'assets/image/activityThumbnail.png';\n    this.isOfficial = false;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/activitylist/activitylist.ts"],"sourceRoot":""}