{"version":3,"sources":["../../src/pages/collection/collection.module.ts","../../src/pages/collection/collection.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CollectionPage } from './collection';\n\n@NgModule({\n  declarations: [\n    CollectionPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CollectionPage),\n  ],\n})\nexport class CollectionPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/collection/collection.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events} from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport firebase from 'firebase/app';\nimport { ToastProvider} from '../../providers/toast/toast'\nimport { TimeFormatProvider} from '../../providers/time-format/time-format';\n@IonicPage()\n@Component({\n  selector: 'page-collection',\n  templateUrl: 'collection.html',\n})\nexport class CollectionPage {\n\n  category: number;\n  disp : any = [];\n  saveKey: any = [];\n\n  collects : Array<any> = [{name: \"活动\", index:0},{name: \"讲座\", index:1},{name:\"攻略\", index:2}];\n  collect : string = \"活动\";\n  tables: Array<string> = [\"collects\"];\n\n  user:any\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public storage: Storage,\n    public timeFormat: TimeFormatProvider,\n    public events: Events) {\n      this.category = navParams.get(\"item\");\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad CollectionPage');\n    this.storage.get('user').then(data=> {\n      this.user = data;\n      console.log(this.user);\n      this.loadData();\n    });\n\n    this.events.subscribe('refreshCollection',()=>{\n      console.log(\"refresh\");\n      this.disp = [];\n      this.loadData();\n    })\n    \n  }\n\n\n  selectCategory(event){\n    let elements=document.getElementsByClassName('button-select');\n    for(let i =0; i<elements.length;i++){\n      elements[i].className=\"button-empty\";\n    }\n    event.target.className=\"button-select\";\n    this.category=event.target.name;\n    console.log(this.category);\n  }\n\n  loadData(){\n    firebase.database().ref(`/UsersAndAdministrators/${this.user.userID}/SavedEvents`).once('value').then(\n      snapshot =>{\n        console.log(snapshot.val());\n        snapshot.forEach(each =>{\n          console.log(each.key);\n          firebase.database().ref(`/DailyEvents/${each.key}`).once('value').then(data => {\n            console.log(data.val());\n            let item = {};\n              item['key'] = data.key;\n              let value = data.val();\n              item['title'] = value['title'];\n              item['address'] = value['address'];\n              if(value.hasOwnProperty('imgs'))\n                item['imgs'] = value['imgs'];\n              else \n                item['imgs'] = [];\n              item['firstBegin'] = value['activityDate'][0]['from'];\n              item['activityDate'] = [];\n              for(let j=0; j<value['activityDate'].length; j++){\n                let time = this.timeFormat.eventTimeFormat(value['activityDate'][j]['from'], value['activityDate'][j]['to']);\n                item['activityDate'].push(time);\n              }\n              if(value['eventCategory1'])\n                item['isFree'] = '免费';\n              else\n                item['isFree'] = '收费';\n              if(value['eventCategory2'])\n                item['isPublic'] = '公共活动';\n              else\n                item['isPublic'] = '私人活动';\n              // item['numsLike'] = value['numsLike'];\n              // item['numsRead'] = value['numsRead'];\n              // item['distance'] = \"0 英里\";\n              // item['calDistance'] = false;\n              this.disp.push(item);\n            });\n            this.disp.sort(function(a,b){\n              return b['firstBegin'] - a['firstBegin'];\n            });\n      \n          });\n        })\n  }\n\n  openDetail(id){\n    console.log(id);\n    this.navCtrl.push('ActivityPage',{'infoId':id});\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/collection/collection.ts"],"sourceRoot":""}